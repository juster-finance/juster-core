## Предложения для дальнейшего развития контракта

### 1. Расширение возможных вариантов ставок (разделение events и pool):
Для того чтобы добавить поддержку разнообразных событий (событий с другой механикой определения победителя, которые используют цены оракла + не ценовые, а спортивные события), можно разбить текущий контракт на две части: PoolManager & EventAdaptor
* poolManager позволяет создавать новые ивенты, для каждого из которых должна быть указана ссылка на EventAdaptor и его eventID. PoolManager полностью управляет всеми финансовыми вопросами: ставками, ликвидностью, пулами, выводом средств, но никак не касается логики события, в нём он полностью полагается на onchain views от eventAdaptor

* eventAdaptor управляет событием с определённой логикой. В одном eventAdaptor может быть несколько событий одного типа, самих eventAdaptor может быть также несколько. Например, для события из v1 можно сформировать адаптор который будет делать два измерения цены используя данные оракла и проверять что динамика больше порога.
  - В адапторе может быть два противоположных результата, один соотносится с For, другой с Against
  - Адаптор полностью управляет всем событием, запускает все триггеры, которые нужны.
  - адаптор даёт информацию по 4 views:
      - (1) можно ли делать ставки (не закончился ли период ставок)
      - (2) закрыто ли событие и определён ли победитель
      - (3) является ли событие отменённым
      - (4) победил ли пул For
  - для получения информации адаптор использует данные ораклов, для корректной работы нужен какой-то бот, который будет запускать все необходимые триггеры

### 2. Возможность выпуска FA2 для ставок за/против
  - возможность продать своё право на получение выйгрыша
  - LP тоже сможет трансформировать свою долю в токены после начала измерений

### 3. Ставки в других токенах? (kUSD например)
  - ставки в нативном токене (чтобы были чуть более привлекательные)?

### 4. Альтернативный withdraw который переносит value на другой ивент?
### 5. Комбинированные инструменты, в которых несколько ставок объединяется в один пакет
  - хотя это как раз можно будет делать с помощью других адаптеров

### 6. Super-Provider / Lending система (пока сырая идея)
Для повышения эффективности агрегирования ликвидности есть следующая идея предоставления плеча для провайдеров ликвидности:
- Отдельный смарт-контракт, в котором любой может залочить тезосы на какой-то срок (до даты D). Эти тезосы + какой-то процент можно будет вывести только после наступления этой даты D. То есть эти тезосы предоставляются в аренду провайдерам ликвидности
- Супер-провайдер имеет возможность эмитировать токен, позволяющий любому взять в аренду тезосы на определённый срок. 1 токен = 1 тезос на 1 день.
- Каждый день супер-провайдер рассчитывает потенциальный объём новой эмиссии токена. Это текущая сумма произведений залоченной ликвидности на их сроки за вычетом суммы выпущенных токенов. Плюс здесь можно учесть какой-то резерв.
- Например если участник А залочил 10 тезосов на 7 дней, это означает что супер-провайдер может выпустить 70 новых токенов аренды ликвидности.
- Токены аренды распределяются каким-то рыночным механизмом, например предлагаются на первичном рынке в виде голандского аукциона
- Любой участник, владеющий токеном аренды может использовать супер-провайдера в качестве плеча x2 или x3 для любого ивента. 1 токен аренды позволяет привлечь плечо в размере 1 тезоса на 1 день. Если срок окончания ивента (betsCloseTime + measurePeriod + window) меньше не кратен 1 дню, можно использовать доли токена. Токен может использоваться только для provideLiquidity и размеры требуемого числа токенов расчитываются под конкретный ивент.
- Также в этой схеме может быть менеджер супер-провайдера, который определяет:
  * на какой минимальный / максимальный срок можно залочить средства
  * с какой цены начинаются торги токеном
  * размеры резерва

- Есть проблема: взятие ликвидности на период больший чем тот обеспечен депозитами, непонятно как ограничивать этот максимальный период, например:
    * A лочит в супер-провайдере 10 тезосов на 7 дней
    * супер-провайдер выпускает и реализует 70 токенов на рынке
    * B хочет запровайдить ликвидность на event который закончится через 30 дней в размере 1 тезоса с плечом от супер-провайдера. Супер-провайдер требует 30 токенов для проведения операции.
    * Проходит 7 дней, A хочет вывести свои 10 тезосов + процент и не может, потому что на балансе только 9 тезосов.
    * то есть надо как-то учитывать "длинность" токенов

- Вторая проблема: если кто-то возьмёт весь объём доступных средств на короткое время (например, B забирает 10 тезосов на день за 10 токенов аренды) и больше никто не может арендовать средства, даже если у него есть токен аренды.

- Частичное решение проблемы: завязать срок на объёме, что нельзя брать мало тезов на слишком длинный период и много тезов на слишком короткий, но это не фундаментальное решение.

- Альтернативный вариант: не происходит никакой эмиссии токена, возможность использовать средства супер провайдера даётся тем, кто залочил DAO токен (тот же токен, что будет использоваться для управления ставками). Объём предоставляемых средств пропорционален доле токенов, которые залочил провайдер ко всем залоченным токенам. Но тут остаётся проблема с ограничением сроков предоставления ликвидности.
